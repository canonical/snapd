#! /usr/bin/env python3

import sys
from socket import timeout
import urllib.request


if len(sys.argv) > 1:
  url = sys.argv[1]
else:
  url = 'http://www.ubuntu.com'

try:
  response = urllib.request.urlopen(url, timeout=3)
  if '<!doctype html>' in response.read().decode('utf-8'):
    print('ok')
except urllib.error.URLError as e:
  print("Error, reason: ", e.reason)
except timeout:
  print("request timeout")
