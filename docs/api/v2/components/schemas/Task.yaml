# SPDX-FileCopyrightText: 2025 Canonical Ltd
# SPDX-License-Identifier: GPL-3.0-only


type: object
description: Represents a single task within a larger change.
properties:
  id:
    type: string
    description: The unique ID for this task.
    example: '1502'
  kind:
    type: string
    description: A code describing what type of task this is.
    enum:
      - check-rerefresh
      - cleanup
      - clear-snap
      - copy-snap-data
      - discard-snap
      - download-snap
      - mount-snap
      - prerequisites
      - remove-aliases
      - run-hook
      - setup-profiles
      - start-snap-services
      - stop-snap-services
      - unlink-current-snap
      - validate-snap
  summary:
    type: string
    description: A human-readable description of the task.
    example: Download snap 'core22' (2133) from channel 'latest/stable'
  status:
    type: string
    description: |-
      The current status of the task. The usual state
      procedure is Do, Doing, Done.
    enum:
      - Abort
      - Default
      - Do
      - Doing
      - Done
      - Error
      - Hold
      - Undo
      - Undoing
      - Undone
      - Wait
  progress:
    $ref: './Progress.yaml'
  spawn-time:
    type: string
    format: date-time
    description: The time this task was started.
    example: 2024-03-28T13:00:35.505604296Z
  ready-time:
    type: string
    format: date-time
    description: The time this task was completed.
    example: 2024-03-28T13:00:35.547274976Z
  data:
    type: object
    properties:
      affected-snaps:
        type: array
        items:
          type: string
        example: [firefox, gnome-42-2204, lxd]
    additionalProperties: true
    description: Additional data related to the task, structure depends on the 'kind'.
  log:
    type: array
    description: A log of events that occurred during the task.
    items:
      type: string
      example: 2025-09-18T08:43:59-02:30 INFO No re-refreshes found.
