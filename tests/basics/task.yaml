summary: Check that basic interactions work
restore: |
    echo Resetting snapd state...
    systemctl stop snapd || true
    umount /var/lib/snapd/snaps/*.snap 2>&1 || true
    rm -rf /snap/*
    rm -rf /var/lib/snapd/*
    rm -f /etc/systemd/system/snap-*.{mount,service}
    rm -f /etc/systemd/system/multi-user.target.wants/snap-*.mount
    systemctl start snapd
execute: |
    echo Core is not there by default...
    snap list | grep core && exit 1

    echo Installing something pulls it...
    snap install hello-world
    snap list | grep core

    echo Test a few basic properties...
    hello-world.echo | grep Hello
    hello-world.env | grep SNAP_NAME=hello-world
    hello-world.evil && exit 1 || true
