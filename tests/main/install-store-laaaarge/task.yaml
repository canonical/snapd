summary: snap install a large snap from the store (bigger than tmpfs)

prepare: |
    tests.systemd stop-unit snapd.service snapd.socket
    # tempfs needs to be big enough to hold the seccomp tmp file
    mount -t tmpfs -o rw,nosuid,nodev,size=256k none /tmp
    systemctl start snapd.{socket,service}

restore: |
    tests.systemd stop-unit snapd.service snapd.socket
    # Umount lazy to avoid busy device error
    umount -l /tmp
    systemctl start snapd.{socket,service}

execute: |
    # test-snapd-go-webserver is about 1MB, tmpfs is 256k :-)
    snap install test-snapd-go-webserver
    snap remove test-snapd-go-webserver
