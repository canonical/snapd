summary: Check that "snap interface" works as expected
details: |
    The "snap interface" command displays a listing of used interfaces
execute: |
    # shellcheck source=tests/lib/systems.sh
    . "$TESTSLIB/systems.sh"

    # we have no core-support interface on a core18 system. core-support
    # is obsolete and not used anymore.
    if ! is_core18_system; then
        snap interface | MATCH 'core-support\s+ special permissions for the core snap'
    fi
    snap interface --all | MATCH 'classic-support\s+ special permissions for the classic snap'
    snap interface core-support > out.yaml
    diff -u out.yaml snap-interface-core-support.yaml
restore: |
    rm -f out.yaml

