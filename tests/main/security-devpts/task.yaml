summary: Ensure that the basic devpts security rules are in place.

systems: [-ubuntu-core-16-64, -ubuntu-core-16-arm-64, -ubuntu-core-16-arm-32]

prepare: |
    echo "Given a basic snap is installed"
    . $TESTSLIB/snaps.sh
    install_local test-snapd-tools

execute: |
    # expect does not work on some hardware in autopkgtest like ppc64el
    echo "Check if expect is working at all"
    if ! expect -f works.exp; then
        echo "SKIP: expect broken in this environment"
        exit 0
    fi

    echo "Then the pts device follows confinement rules"
    expect -d -f pts.exp
