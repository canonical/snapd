summary: Test that snap component command works as expected

details: |
    This test verifies that snap component functions correctly
    when given valid and invalid snap and component names.

prepare: |
    ${TESTSTOOLS}/install-local test-snap1

restore: |
    snap remove --purge test-snap1

execute: |
    # 1. Check invalid snap name
    snap component invalid-snap-name+component-name 2>snap-component.stderr
    MATCH 'error: no matching snaps installed' < snap-component.stderr

    # 2. Check invalid component name
    snap component test-snap1+invalid-component-name 2>snap-component.stderr
    MATCH 'error: component "invalid-component-name" for snap "test-snap1" is not installed' < snap-component.stderr

    # 3. Check valid component (Single)
    # The command prints metadata, not execution output.
    snap component test-snap1+runtime > snap-component.stdout
    MATCH 'component: test-snap1\+runtime' < snap-component.stdout
    MATCH 'type: app' < snap-component.stdout
    MATCH 'summary: The runtime component' < snap-component.stdout

    # 4. Check multiple valid components
    # Should list both sequentially
    snap component test-snap1+compiler+runtime > snap-component.stdout
    MATCH 'component: test-snap1\+compiler' < snap-component.stdout
    MATCH 'component: test-snap1\+runtime' < snap-component.stdout
