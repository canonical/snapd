summary: Test that snap component command works as expected

details: |
    This test verifies that snap component functions correctly
    when given valid and invalid snap and component names.

prepare: |
    "${TESTSTOOLS}"/snaps-state install-local test-snap-with-components

restore: |
    snap remove --purge test-snap-with-components

execute: |
    snap component invalid-snap-name+component-name 2>snap-component.stderr
    MATCH 'error: no matching snaps installed' < snap-component.stderr

    snap component test-snap-with-components+invalid-component-name 2>snap-component.stderr
    MATCH 'error: component "invalid-component-name" for snap "test-snap-with-components" is not installed' < snap-component.stderr

    snap component test-snap-with-components+one > snap-component.stdout
    MATCH 'component: test-snap-with-components\+one' < snap-component.stdout
    MATCH 'type: test' < snap-component.stdout
    MATCH 'summary: First component for test-snap-with-components' < snap-component.stdout

    snap component test-snap-with-components+two+one > snap-component.stdout
    MATCH 'component: test-snap-with-components\+one' < snap-component.stdout
    MATCH 'component: test-snap-with-components\+two' < snap-component.stdout
