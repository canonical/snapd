summary: Ensure apt hooks work

# apt hook only available on 18.04+
systems: [ubuntu-18.04-*, ubuntu-18.10-*]

restore: |
    rm -f expected out

execute: |
    echo "Creating expected file"
    cat > expected <<EOF

    WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

    
    No apt package "aws-cli", but there is a snap with that name.
    Try "snap install aws-cli"
    
    E: Unable to locate package aws-cli
    EOF
    echo "Checking apt hook"
    if apt install -qq aws-cli > out 2>&1; then
        res=$?
        echo "apt should return a non-zero exit code but it returned $res"
        exit 1
    fi
    echo "Verify the result"
    diff -u out expected
    
