name: test-snapd-audit-control
version: '1.0'
summary: Basic snap to test the audit-control interface
description: |
  A basic snap which uses the audit_control capability, reads /proc/*/loginuid
  and /proc/*/sessionid, writes /run/auditd.pid and /run/auditd.state, and
  adjusts its OOM score.
architectures:
- amd64
base: core22
apps:
  audit-rate:
    command: bin/audit-rate
    plugs: [audit-control]
  read-ids:
    command: bin/read-ids
    plugs: [audit-control]
  write-auditd-pid-state:
    command: bin/write-auditd-pid-state
    plugs: [audit-control]
  adjust-oom-score:
    command: bin/adjust-oom-score
    plugs: [audit-control]

environment:
  LD_LIBRARY_PATH: ${SNAP_LIBRARY_PATH}${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}:$SNAP/lib:$SNAP/lib/x86_64-linux-gnu
  PATH: $SNAP/usr/sbin:$SNAP/usr/bin:$SNAP/sbin:$SNAP/bin:$PATH
