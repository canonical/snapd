summary: Ensures that the mount-observe interface works

details: |
    A snap declaring the mount-observe plug is defined, its command
    just read the /proc/<pid>/mounts file.

    The test itself checks for the lack of autoconnect and then tries
    to execute the snap command with the plug connected (it must succeed)
    and disconnected (it must fail).

    The test also checks that a new mount created after the snap is installed
    is also shown when the plug is connected.

execute: |
    echo "Given a snap declaring the mount-observe plug is installed"

    echo "Then the plug is shown as disconnected"

    echo "========================================="

    echo "When the plug is connected"

    echo "Then the mount info is reachable"

    echo "========================================="

    echo "When the plug is disconnected"

    echo "Then the mount info is not reachable"

    echo "========================================="

    echo "When the plug is connected"

    echo "And a new mount is created"

    echo "Then the new mount info is reachable"
