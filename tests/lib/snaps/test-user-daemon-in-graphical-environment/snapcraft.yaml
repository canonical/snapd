name: test-snapd-daemon-desktop
version: "1"
summary: test-snapd-daemon-user-in-graphical-desktop
description: |
 Test the snap_daemon user in graphical desktop
confinement: strict
grade: devel
base: core24

apps:
  test-snapd-daemon-user-in-graphical-desktop:
    command: usr/bin/ls
    plugs:
      - desktop
      - wayland
      - x11
    daemon: simple
    passthrough: #///! TODO: Remove once daemon-scope lands in snapcraft
      daemon-scope: user
    restart-condition: on-success
    restart-delay: 2s

  test-snapd-daemon-user-normal:
    command: usr/bin/ls
    daemon: simple
    passthrough: #///! TODO: Remove once daemon-scope lands in snapcraft
      daemon-scope: user
    restart-condition: on-success
    restart-delay: 2s

parts:
  test-snapd-daemon-user-in-graphical-desktop:
    plugin: nil
    stage-packages:
    - coreutils

